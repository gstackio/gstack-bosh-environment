---

# General user-facing settings

- path: /instance_groups/name=shield/jobs/name=shield-daemon/properties/domain?
  type: replace
  value: ((shield_domain))

- path: /variables/name=shield-tls/options/alternative_names/1
  type: remove # the "*.shield.default.shield.bosh" alternative name

- path: /variables/name=shield-tls/options/alternative_names/-
  type: replace
  value: <%= shield.instance.address %>

- path: /variables/name=shield-tls/options/alternative_names/-
  type: replace
  value: "*.shield.((network_name)).((deployment_name)).bosh"

- path: /variables/name=shield-tls/options/alternative_names/-
  type: replace
  value: ((shield_domain))


- path: /instance_groups/name=shield/jobs/name=shield-daemon/properties/port?
  type: replace
  value: ((shield_port))



# Networks

- path: /instance_groups/name=shield/networks/name=default
  type: replace
  value:
    name: ((network_name))

# Disks

- path: /instance_groups/name=shield/persistent_disk_type
  type: replace
  value: ((shield_disk_type))



# Plumbery

- path: /name
  type: replace
  value: ((deployment_name))

# # Workaround for SHIELD daemon not exposing the correct IP in its 'shield' link
# - path: /instance_groups/name=shield/jobs/name=shield-agent/consumes/shield-daemon?
#   type: replace
#   value:
#     instances:
#       - address: ((shield_internal_hostname)) # shield-v7.easyfoundry.internal # 10.244.204.61
#     properties:
#       domain: ((shield_internal_hostname)) # shield-v7.easyfoundry.internal # 10.244.204.61
#       port: ((shield_port))

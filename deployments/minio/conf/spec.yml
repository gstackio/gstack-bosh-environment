---
subsys:
  name: minio
  type: bosh-deployment

input_resources:
  - name: minio-boshrelease
    type: git
    uri: https://github.com/minio/minio-boshrelease.git
    version: b7fb0f8 # '2018-06-08T03-49-38Z' release, as of June 18th, 2018


main_deployment_file: minio-boshrelease/manifests/manifest-dist-example.yaml


operations_files:
  local:
    - rename-deployment
    - set-versions
    - use-generated-password
    - scale-vms-and-disks
    - randomize-az-placement


deployment_vars:
  deployment_name: easyfoundry-minio

  minio_instances: 4 # a minimum or 4 is required when using erasure coding (the default)
  persistent_disk_type: 2GB


  # Versions

  minio_version: 2018-06-08T03-49-38Z
  minio_sha1: 3a5ae84f8b2be9ee640d545c489633e36c0674dd

  # stemcell_name:    # imported below
  # stemcell_version: # imported below
  # stemcell_sha1:    # imported below


imported_vars:
  - subsys: cf
    imports:

      # Versions

      - name: stemcell_name
        from: depl-vars
        path: /stemcell_name
      - name: stemcell_version
        from: depl-vars
        path: /stemcell_version
      - name: stemcell_sha1
        from: depl-vars
        path: /stemcell_sha1

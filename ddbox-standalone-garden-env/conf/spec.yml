---
subsys:
  name: ddbox-standalone-garden-env
  type: bosh-environment

input_resources:
  - name: bosh-deployment
    type: git
    uri: https://github.com/cloudfoundry/bosh-deployment.git
    version: "50d4313" # BOSH v270.9.0 (as of Dec 3rd, 2019)


infra_vars:
  alias: vbox # the Bosh CLI alias
  iaas: virtualbox # the GBE environment flavor

dns:
  zone: prototyp.it
  subdomain: easyfoundry


main_deployment_file: bosh-deployment/bosh.yml

operations_files:
  10_bosh-deployment:
    - virtualbox/cpi
    - virtualbox/remote
    - bosh-lite
    - jumpbox-user
  30_local:
    - keep-bosh-agent
    - custom-stemcell-version
    - custom-bosh-version-precompiled
    - set-disk-size
    - scale-vm-size
    - retain-garden-only

variables_files:
  10_local:
    - file: secrets
      example:
        vbox_ssh:
          private_key: |
            -----BEGIN RSA PRIVATE KEY-----
            ...
            -----END RSA PRIVATE KEY-----


deployment_vars:
  disk_size: 220_000 # i.e. 220GB

  external_ip: ~
  vbox_host: ~
  vbox_username: ~

  routable_network_cidr: 10.244.0.0/16

  # web_router_ip: "10.244.0.34" # classical Gorouter reverse-proxy
  web_router_ip: "10.244.0.43" # Tr√¶fik reverse-proxy for Let's Encrypt support
  ssh_proxy_ip: "10.244.0.34"

  internal_ip: "192.168.50.7"
  internal_gw: "192.168.50.1"
  internal_cidr: 192.168.50.0/24


  # Versions

  bosh_precompiled_version: "270.9.0"
  bosh_precompiled_url: https://s3.amazonaws.com/bosh-compiled-release-tarballs/bosh-270.9.0-ubuntu-xenial-621.26-20191126-183003-146564909-20191126183010.tgz
  bosh_precompiled_sha1: e913a0fecb79b324e6fa6d27bb7c345074b3658d

  stemcell_name: bosh-vsphere-esxi-ubuntu-xenial-go_agent
  stemcell_version: "621.26"
  stemcell_sha1: cf72f275d86c346bac223818fc45884328b0fc25


imported_vars:
  - subsys: ddbox-standalone-bosh-env
    imports:

      - name: blobstore_ip
        from: depl-vars
        path: /internal_ip

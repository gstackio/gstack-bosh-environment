---
subsys:
  name: cloud-config
  type: bosh-config

input_resources:
  - name: cf-deployment
    type: git
    uri: https://github.com/cloudfoundry/cf-deployment.git
    version: v12.0.0
  - name: traefik-boshrelease
    type: git
    uri: https://github.com/gstackio/traefik-boshrelease.git
    version: c580189 # v1.8.0 (Traefik v1.7.18) with compiled release for stemcell v456.30


main_config_file: cf-deployment/iaas-support/bosh-lite/cloud-config.yml

operations_files:
  10_traefik-boshrelease:
    - deployment/cloud-config/cf-integration
  20_local:
    - additional-disk-sizes
    - set-compilation-workers
    - cf-mysql-support
    - concourse-support
    - shield-v8-support
    - shield-v7-support
    - cassandra-support
    - logsearch-support
    - kong-support
    - redis-support


config_vars:
  # Note: we lower compilation workers a little bit for our 7-cores test
  # environment, whose load raises up to 17+ when running cf-d compilations.
  # Feel free to add more workers for environments with more cores.
  compilation_workers: 5


imported_vars:
  - subsys: mysql
    imports:
      - name: mysql_network
        from: depl-vars
        path: /network_name
      - name: mysql_vm_extension
        from: depl-vars
        path: /mysql_vm_extension
  - subsys: concourse
    imports:
      - name: concourse_network
        from: depl-vars
        path: /network_name
  - subsys: shield-v8
    imports:
      - name: shield_v8_network
        from: depl-vars
        path: /network_name
  - subsys: shield-v7
    imports:
      - name: shield_v7_network
        from: depl-vars
        path: /network_name
  - subsys: cassandra
    imports:
      - name: cassandra_network
        from: depl-vars
        path: /network_name
  - subsys: kong
    imports:
      - name: kong_network
        from: depl-vars
        path: /network_name
  - subsys: redis
    imports:
      - name: redis_network
        from: depl-vars
        path: /default_network
